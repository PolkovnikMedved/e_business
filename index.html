<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <title>Odoo Data</title>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <h3 class="page-header">Voici nos données de la db odoo</h3>
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
            <table class="table table-stripped table-responsive">
                <thead class="thead-default">
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Website</th>
                        <th>Lang</th>
                        <th>Email</th>
                        <th>Date created</th>
                        <th>Street</th>
                        <th>Postal code</th>
                        <th>City</th>
                    </tr>
                </thead>

                <tbody id="data-table">
                <!-- GENERATED BY JAVASCRIPT -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<script
  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
  crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
    /* Une requete AJAX pour recupèrer nos données */
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'http://localhost:8000', false);
    xhr.setRequestHeader('Content-Type', 'application/json');
    response = '';
    xhr.onreadystatechange = function(){
        var data = xhr.responseText;
        console.log('Le type de data est ' + typeof data)
        var jsonResponse = JSON.parse(data);

        console.log(jsonResponse + ', ' + typeof jsonResponse);
        console.log('++++++++++++++++++++++++++++')
        console.log(jsonResponse[0]);
        response = jsonResponse;
    };
    xhr.send(null);

    /* Dessiner notre tableau */
    var table = document.getElementById("data-table");
    for(i = 0; i < response.length; i++){
        var row = table.insertRow(i);
        var id = row.insertCell(0);
        var nom = row.insertCell(1);
        var website = row.insertCell(2);
        var lang = row.insertCell(3);
        var email = row.insertCell(4);
        var dt_cre = row.insertCell(5);
        var street = row.insertCell(6);
        var zip = row.insertCell(7);
        var city = row.insertCell(8);

        id.innerHTML = response[i]['id'];
        nom.innerHTML = response[i]['name'];
        website.innerHTML = response[i]['website'];
        lang.innerHTML = response[i]['lang'];
        email.innerHTML = response[i]['email'];
        dt_cre.innerHTML = response[i]['create_date'];
        street.innerHTML = response[i]['street'];
        zip.innerHTML = response[i]['zip'];
        city.innerHTML = response[i]['city'];
        console.log('NAME = ' + response[i]['name'] + ', = ' + nom.innerHTML);
    }

</script>
</body>
</html>